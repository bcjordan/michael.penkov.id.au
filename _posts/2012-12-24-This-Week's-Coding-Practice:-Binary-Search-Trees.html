---           
layout: post
title: This Week's Coding Practice - Binary Search Trees
date: 2012-12-24 11:31:40 UTC
updated: 2012-12-24 11:31:40 UTC
comments: false
categories: blog
---
 
This week's topic, as you may have guessed already, was Binary Search Trees (BST). &nbsp;A Binary Tree (BT) is a hierarchical structure in which each <i>node</i> has one <i>parent</i> (with the exception of the root node, which is an orphan) and at most two <i>children</i>. &nbsp;Nodes without children are called <i>leaf nodes. &nbsp;</i>A BST is a special kind of BT that satisfies the following <i>invariant</i>: an in-order traversal of the tree yields nodes in ascending order. &nbsp;An <i>auto-balancing</i> BST is a BST that also satisfies another invariant: the <i>height</i> of the tree (the maximum number of <i>links</i>&nbsp;from the root to a leaf node) needs to be <i>relatively small</i>.<br /><br />The first invariant allows the BST to be searched efficiently: you start at the root, and at each node, you compare the value you're searching for and the value of the node. &nbsp;If they are equal, you've found your node and you're all done. If the former is less than the latter, then you continue down to the left child of the node; otherwise, you go down the right child of the node. &nbsp;If you can't continue because a particular child doesn't exist, then the BST doesn't contain the value you're looking for. &nbsp;How long does this retrieval operation take? &nbsp;Well, at each step you go down one level, so you will need at most <i>h</i>&nbsp;steps, where <i>h</i>&nbsp;is the height of the tree.<br /><br />This is where the second invariant comes in. &nbsp;Consider this example: an ordered list of n<i>&nbsp;</i>numbers is being added, one by one, to a BST that does not satisfy the second invariant. &nbsp;What will the resulting tree look like after the <i>n</i>th addition? &nbsp;It will resemble a linked list n<i> </i>elements long. &nbsp;Searching through this list will be at most O(n). &nbsp;The benefit of using such a BST over a simple linked list would be lost. &nbsp;If, on the other hand, the BST "magically" kept its height <i>relatively small</i>, then you would be able to perform more effective lookups. &nbsp;How small is "relatively small?" &nbsp;Well, consider the number of nodes n (unknown) for a simple BT with height <i>h</i>: you would have 1 node at the top (the root), 2 nodes on the second level (children of the root), 4 nodes at the third level (grandchildren of the root) and so on. &nbsp;This is a <a href="http://en.wikipedia.org/wiki/Geometric_progression">geometric progression</a> with a <i>common ratio</i> of 2 and an <i>initial value</i>&nbsp;of 1,&nbsp;which sums to $2^h - 1$. &nbsp;This is the value of n. &nbsp;Obviously, the relationship between h and n is: $h = \lceil \log_2(n+1) \rceil$ . &nbsp;The ceiling is there to account for the fact that not all non-leaf nodes will have two children. &nbsp;This is the optimal height of a BST. &nbsp;In practice, keeping the height of the tree at precisely this value is overkill, so the invariant is considered satisfied if the height is within some factor of this optimal value. &nbsp;The benefit of satisfying these two invariants is assurance that retrievals will take at most O(log(n)) of the number of nodes in the tree. &nbsp;The above condition implies that the left and right subtrees must be of similar heights (i.e. <i>balanced</i>). &nbsp;This is the reason that such BSTs are called <i>auto-balancing.</i><br /><br />One main question remains: how does an auto-balancing BST maintain its height to satisfy the second invariant? &nbsp;The answer depends on the implementation, of which there are several. &nbsp;I'll discuss this in more detail in the next post. &nbsp;For now, I leave you with the solution for this week's problem: how do you check that a BT is a auto-balancing BST?<br /><br /><script src="https://gist.github.com/4345086.js"></script> As an aside, yet another hooray for <a href="http://tex.stackexchange.com/questions/13865/how-to-use-latex-on-blogspot">StackExchange</a>, which got me up and running with LaTeX on Blogger in no time.
